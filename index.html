<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>üé¨ –ö–∏–Ω–æ –ö–≤–∏–∑</title>
    <style>
        body { 
            font-family: Arial; 
            padding: 20px; 
            text-align: center; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        button { 
            padding: 20px 40px; 
            font-size: 20px; 
            margin: 20px;
            background: white;
            color: #667eea;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>üé¨ –ö–ò–ù–û –ö–í–ò–ó</h1>
    <p>–¢–µ—Å—Ç —Å–≤—è–∑–∏ —Å –±–æ—Ç–æ–º</p>
    
    <button onclick="sendTest()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –±–æ—Ç—É</button>
    <button onclick="createRoom()">üè† –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
    
    <div id="status" style="margin-top: 30px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px;">
        –ñ–¥—É –¥–µ–π—Å—Ç–≤–∏–π...
    </div>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const tg = window.Telegram.WebApp;
        
        tg.expand();
        tg.enableClosingConfirmation();
        
        function updateStatus(text) {
            document.getElementById('status').innerHTML = text;
            console.log("Status:", text);
        }
        
        function sendTest() {
            updateStatus("üîÑ –û—Ç–ø—Ä–∞–≤–ª—è—é —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ...");
            
            const data = {
                action: "test",
                message: "–ü—Ä–∏–≤–µ—Ç –æ—Ç Mini App!",
                timestamp: new Date().toISOString(),
                user: tg.initDataUnsafe?.user?.first_name || "–ê–Ω–æ–Ω–∏–º"
            };
            
            console.log("üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é –¥–∞–Ω–Ω—ã–µ:", data);
            
            // –û–¢–ü–†–ê–í–ö–ê –ë–û–¢–£
            tg.sendData(JSON.stringify(data));
            
            updateStatus("‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã! –ñ–¥—É –æ—Ç–≤–µ—Ç...");
        }
        
        function createRoom() {
            updateStatus("üè† –°–æ–∑–¥–∞—é –∫–æ–º–Ω–∞—Ç—É...");
            
            const data = {
                action: "create_room",
                username: tg.initDataUnsafe?.user?.first_name || "–ò–≥—Ä–æ–∫",
                timestamp: new Date().toISOString()
            };
            
            console.log("üì§ –°–æ–∑–¥–∞—é –∫–æ–º–Ω–∞—Ç—É:", data);
            tg.sendData(JSON.stringify(data));
            updateStatus("‚úÖ –ó–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
        }
        
        // –°–õ–£–®–ê–ï–ú –û–¢–í–ï–¢–´ –û–¢ –ë–û–¢–ê
        tg.onEvent('webAppDataReceived', (event) => {
            console.log("üì• –û—Ç–≤–µ—Ç –æ—Ç –±–æ—Ç–∞:", event.data);
            updateStatus("üéâ –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç –±–æ—Ç–∞!");
            
            try {
                const data = JSON.parse(event.data);
                alert("–ë–æ—Ç –æ—Ç–≤–µ—Ç–∏–ª:\n" + JSON.stringify(data, null, 2));
            } catch (e) {
                alert("–û—Ç–≤–µ—Ç: " + event.data);
            }
        });
        
        tg.ready();
        updateStatus("‚úÖ Mini App –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ");
        console.log("‚úÖ Mini App –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω");
    </script>
</body>
</html>




