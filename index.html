<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–¢–µ—Å—Ç Mini App</title>
</head>
<body style="padding: 20px; font-family: Arial;">
    <h1>üé¨ –¢–µ—Å—Ç —Å–≤—è–∑–∏ —Å –±–æ—Ç–æ–º</h1>
    
    <button onclick="sendTest()" style="padding: 15px; font-size: 18px;">
        üîò –ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Ç–µ—Å—Ç–∞
    </button>
    
    <div id="status" style="margin-top: 20px; padding: 10px; background: #f0f0f0;"></div>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const tg = window.Telegram.WebApp;
        
        // –†–∞—Å—à–∏—Ä—è–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        tg.expand();
        tg.enableClosingConfirmation();
        
        function updateStatus(text) {
            document.getElementById('status').innerHTML = text;
            console.log("Status:", text);
        }
        
        function sendTest() {
            updateStatus("üîÑ –û—Ç–ø—Ä–∞–≤–ª—è—é –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É...");
            
            const testData = {
                action: "test_from_mini_app",
                timestamp: new Date().toISOString(),
                user: tg.initDataUnsafe?.user?.first_name || "–ê–Ω–æ–Ω–∏–º"
            };
            
            console.log("–û—Ç–ø—Ä–∞–≤–ª—è—é:", testData);
            
            // –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–• –ë–û–¢–£
            tg.sendData(JSON.stringify(testData));
            
            updateStatus("‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã! –ñ–¥–µ–º –æ—Ç–≤–µ—Ç...");
        }
        
        // –°–õ–£–®–ê–¢–ï–õ–¨ –û–¢–í–ï–¢–û–í –û–¢ –ë–û–¢–ê
        tg.onEvent('webAppDataReceived', (event) => {
            console.log("üì• –û—Ç–≤–µ—Ç –æ—Ç –±–æ—Ç–∞:", event.data);
            updateStatus("üéâ –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç –±–æ—Ç–∞: " + event.data);
            
            try {
                const data = JSON.parse(event.data);
                alert("–ë–æ—Ç –æ—Ç–≤–µ—Ç–∏–ª: " + JSON.stringify(data));
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞:", e);
            }
        });
        
        // –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
        tg.ready();
        updateStatus("‚úÖ Mini App –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ");
        console.log("Mini App –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω");
        
        // –ê–≤—Ç–æ-—Ç–µ—Å—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            console.log("–ê–≤—Ç–æ-—Ç–µ—Å—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫...");
        }, 2000);
    </script>
</body>
</html>



